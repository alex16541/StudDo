<div class="wrapper" *ngIf="!isLoading; else loading">
    <div class="toolbar card">
        <div class="toolbar__pagination">
            <div class="toolbar__prev" (click)="changeMonth(-1)"
                 matTooltip="Пред идущий месяц"
                 [matTooltipPosition]="'left'">
                <svg class="btn btn_icon" width="30" height="30" viewBox="0 0 33 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14.7566 20.2834L0.727258 6.45958C-0.242419 5.50411 -0.242419 3.9591 0.727258 3.01379L3.05861 0.716602C4.02829 -0.238867 5.59628 -0.238867 6.55564 0.716602L16.5 10.5152L26.4444 0.716602C27.414 -0.238867 28.982 -0.238867 29.9414 0.716602L32.2727 3.01379C33.2424 3.96926 33.2424 5.51428 32.2727 6.45958L18.2434 20.2834C17.2943 21.2389 15.7263 21.2389 14.7566 20.2834V20.2834Z" fill="white"/>
                </svg>
            </div>

            <mat-form-field style="display: none " appearance="fill">
                <mat-label>Месяц и год</mat-label>
                <input  matInput [matDatepicker]="picker">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker
                                startView="year"
                                touchUi
                                color="warn"
                                [startAt]="now.toDate"
                                (monthSelected)="setMonthAndYear($event, picker)"
                                [calendarHeaderComponent]="monthPickerHeader">
                </mat-datepicker>
            </mat-form-field>
            <button mat-button class="toolbar__month" matTooltip="Выбор месяца" [matTooltipPosition]="'above'" (click)="picker.open()">{{dateText | titlecase}}</button>

            <div class="toolbar__next" (click)="changeMonth(1)"
                 matTooltip="Следующий месяц"
                 [matTooltipPosition]="'right'">
                <svg class="btn btn_icon" width="30" height="30" viewBox="0 0 33 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14.7566 20.2834L0.727258 6.45958C-0.242419 5.50411 -0.242419 3.9591 0.727258 3.01379L3.05861 0.716602C4.02829 -0.238867 5.59628 -0.238867 6.55564 0.716602L16.5 10.5152L26.4444 0.716602C27.414 -0.238867 28.982 -0.238867 29.9414 0.716602L32.2727 3.01379C33.2424 3.96926 33.2424 5.51428 32.2727 6.45958L18.2434 20.2834C17.2943 21.2389 15.7263 21.2389 14.7566 20.2834V20.2834Z" fill="white"/>
                </svg>
            </div>

        </div>
        <div class="toolbar__buttons">
            <div class="toolbar__btn" (click)="router.navigate(['/home/calendar'])"
                 matTooltip="Перейти к текущему месяцу"
                 [matTooltipPosition]="'above'">
                <svg class=" btn btn_icon" width="30" height="30" viewBox="0 0 25 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 26.2812C0 27.7822 1.19978 29 2.67857 29H22.3214C23.8002 29 25 27.7822 25 26.2812V10.875H0V26.2812ZM3.57143 15.4062C3.57143 14.9078 3.97321 14.5 4.46429 14.5H9.82143C10.3125 14.5 10.7143 14.9078 10.7143 15.4062V20.8438C10.7143 21.3422 10.3125 21.75 9.82143 21.75H4.46429C3.97321 21.75 3.57143 21.3422 3.57143 20.8438V15.4062ZM22.3214 3.625H19.6429V0.90625C19.6429 0.407812 19.2411 0 18.75 0H16.9643C16.4732 0 16.0714 0.407812 16.0714 0.90625V3.625H8.92857V0.90625C8.92857 0.407812 8.52679 0 8.03571 0H6.25C5.75893 0 5.35714 0.407812 5.35714 0.90625V3.625H2.67857C1.19978 3.625 0 4.84277 0 6.34375V9.0625H25V6.34375C25 4.84277 23.8002 3.625 22.3214 3.625Z" fill="white"/>
                </svg>
            </div>
            <div class="toolbar__btn" (click)="router.navigate(['/home/timetable/filter'])"
                 matTooltip="Ваши расписания"
                 [matTooltipPosition]="'above'">
                <svg class=" btn btn_icon" width="30" height="30" viewBox="0 0 33 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M31.9688 22.7857H10.3125V21.75C10.3125 21.1804 9.84844 20.7143 9.28125 20.7143H7.21875C6.65156 20.7143 6.1875 21.1804 6.1875 21.75V22.7857H1.03125C0.464062 22.7857 0 23.2518 0 23.8214V25.8929C0 26.4625 0.464062 26.9286 1.03125 26.9286H6.1875V27.9643C6.1875 28.5339 6.65156 29 7.21875 29H9.28125C9.84844 29 10.3125 28.5339 10.3125 27.9643V26.9286H31.9688C32.5359 26.9286 33 26.4625 33 25.8929V23.8214C33 23.2518 32.5359 22.7857 31.9688 22.7857ZM31.9688 12.4286H26.8125V11.3929C26.8125 10.8232 26.3484 10.3571 25.7812 10.3571H23.7188C23.1516 10.3571 22.6875 10.8232 22.6875 11.3929V12.4286H1.03125C0.464062 12.4286 0 12.8946 0 13.4643V15.5357C0 16.1054 0.464062 16.5714 1.03125 16.5714H22.6875V17.6071C22.6875 18.1768 23.1516 18.6429 23.7188 18.6429H25.7812C26.3484 18.6429 26.8125 18.1768 26.8125 17.6071V16.5714H31.9688C32.5359 16.5714 33 16.1054 33 15.5357V13.4643C33 12.8946 32.5359 12.4286 31.9688 12.4286ZM31.9688 2.07143H18.5625V1.03571C18.5625 0.466071 18.0984 0 17.5312 0H15.4688C14.9016 0 14.4375 0.466071 14.4375 1.03571V2.07143H1.03125C0.464062 2.07143 0 2.5375 0 3.10714V5.17857C0 5.74821 0.464062 6.21429 1.03125 6.21429H14.4375V7.25C14.4375 7.81964 14.9016 8.28571 15.4688 8.28571H17.5312C18.0984 8.28571 18.5625 7.81964 18.5625 7.25V6.21429H31.9688C32.5359 6.21429 33 5.74821 33 5.17857V3.10714C33 2.5375 32.5359 2.07143 31.9688 2.07143Z" fill="white"/>
                </svg>
            </div>
        </div>
    </div>

    <div class="calendar">
        <div class="calendar__page">

            <div class="calendar__header">
                <div class="calendar__dayOfWeek dayNightText">П</div>
                <div class="calendar__dayOfWeek dayNightText">В</div>
                <div class="calendar__dayOfWeek dayNightText">С</div>
                <div class="calendar__dayOfWeek dayNightText">Ч</div>
                <div class="calendar__dayOfWeek dayNightText">П</div>
                <div class="calendar__dayOfWeek dayNightText">С</div>
                <div class="calendar__dayOfWeek dayNightText">В</div>
            </div>

            <div class="calendar__grid">
                <div class="calendar__day card"
                     matRipple [matRippleColor]="'rgba(33,33,33,0.5)'"
                     *ngFor="let day of days; let i = index"
                     [ngClass]="{'calendar__day_light': day.dayOfWeek/5 >= 1}"
                     [ngStyle]="{'grid-column': i == 0 ? day.dayOfWeek+1 : ''}"
                     (click)="clickDay(day.fullDate)"
                >
                    <div class="calendar__text" >{{day.day}}</div>
                    <div class="calendar__types">
                        <span *ngFor="let calendar of day.calendars"
                              [ngStyle]="{'background-color': calendar.color ? calendar.color : '#f36f6f'}"
                              class="calendar__point"></span>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<ng-template #loading>
    <app-loading></app-loading>
</ng-template>
